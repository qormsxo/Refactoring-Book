# 코드에서 나는 악취

> 냄새가 나면 당장 갈아라
>
> -켄트 벡 할머니의 육아 원칙

<hr style="border: 2px solid;">

## 3.1 기이한 이름

코드를 명료하게 표현하는데 가장 중요한 요소는 바로 '이름'이다.

그래서 함수, 모듈, 변수, 클래스 이름만 보고도 무슨 일을 하는지 어떻게 사용하는지를 명확히 알 수 있어야 한다.

하지만 이름 짓기는 프로그래밍에서 가장 어렵다고 손꼽히는 두가지 중 하나다

그 때문에 가장 많이 사용하는 리팩터링도 대부분 이름 바꾸기다.

<hr style="border: 2px solid;">

## 3.2 중복코드

똑같은 코드가 여러곳에서 반복된다면 하나로 통합하여 더 나은 프로그램을 만들 수 있다.

중복 코드를 해결 할 땐 서로 차이점이 없는지 살펴보는게 중요하다.

<hr style="border: 2px solid;">

## 3.3 긴 함수

우리의 경험에 비추어보면 오랜 기간 잘 활용되는 함수들은 대체로 길이가 짧았다.

짧은 함수들로 구성된 코드베이스를 훑어보면 코드가 끝없이 위임하는 구조로 작성되어 있다.

짧은 함수로 만든다는 건 하나의 긴 함수처럼 모든 계산을 하는 것이 아니라 짧은 함수 여러개를 호출하는 구조이다.

이런 구조 때문에 성능 상으로 떨어진다는 생각을 할 수 있지만 요즘 프로그래밍 언어에서 이는 문제가 되지 않는다.

그리고 짧은 함수와 좋은 이름의 조합은 짧은 함수의 구현을 보지 않아도 어떠한 일을 하는지 명확하게 알 수 있어서 코드를 이해하기가 훨씬 쉬어진다.

이를 위해서는 함수 자체를 적극적으로 짧게 구성하도록 해야한다.

긴 함수에서 우리가 주석으로 달아야 하는 부분이 있다면 그 부분은 함수로 빼내자.

그리고 그 함수의 이름은 동작 방식에 집중하지 말고 의도에 집중하자.

함수의 이름은 의도가 중요하고 이 의도와 실제 구현과의 괴리감이 얼마나 있느냐가 잘 짓는 기준이다.

즉 무엇을 하는지 설명해주지 못한다면 함수의 이름을 잘 지은게 아니다.

<hr style="border: 2px solid;">

## 3.4 긴 매개변수 목록

옛날에는 함수에 필요한 모든 데이터를 함수 파라미터로 넘기라는 말을 들었다.

그래야 암적 존재인 전역 데이터의 사용을 줄일 수 있기 때문이다.

하지만 매개변수의 목록이 길어지면 그 자체로 이해하기 어렵다.

**클래스를 통해서 매개변수를 줄일 수 있다.** 만약에 여러 함수에서 공통적으로 사용하는 파라미터들이 있다면 이를 하나의 클래스 안으로 옮기면 파라미터 자체를 많이 줄일 수 있다.

<hr style="border: 2px solid;">

## 3.5 전역 데이터

전역 데이터를 주의해야 한다는 점은 옛날 부터 있던 말이다.

전역 데이터는 악취 중에 가장 독한 악취 중의 하나다.

전역 데이터가 악취인 이유는 코드 베이스 어디에서나 변경이 가능하니까 이 변경 시점을 추적하는게 힘들기 때문이다.

그래서 버그는 끊임없이 발생하는데 이 원인이 되는 코드를 찾기가 힘들다.

전역 데이터의 대표적인 형태는 클래스 전역 변수와 싱글톤 객체가 있다.

이를 방지하기 위해 우리가 자주 사용하는 방법은 변수 캡슐화 하기다.

이를 통해 접근 포인트를 제어할 수 있다. 같은 패키지 내에서만 접근할 수 있도록 한다던지.

전역 데이터는 가변일 때 특히나 더 까다롭고 변경되지 않는다고 하면 그나마 안전한 편이다.
